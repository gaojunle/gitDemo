<!Doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <title>米乐弗-创建演讲</title>
    <link rel="stylesheet" href="../../css/common/normalize.css">
    <link rel="stylesheet" href="../../css/common/common.css">
    <link rel="stylesheet" href="../../css/common/pagination.css">
    <link rel="stylesheet" href="../../js/lib/ueditor/themes/default/css/umeditor.css">
    <link rel="stylesheet" href="../../css/page/pc/create.css">
</head>
<body>
<div id="header"></div>
<div class="contbox ">
    <div class="title">
        <span class="triangle triangle-left"></span><span>创建人物</span><span class="triangle triangle-right"></span>
    </div>
    <div class="formbox clearfix">
        <div class="head-pic fl">
            <form enctype="multipart/form-data" id="uploadImg" method="post" action="">
                <a href="javascript:;" class="a-upload">
                    <span>点击上传头像</span>
                    <img src="../../img/pc/upload-default.png" alt="">
                    <input name="imgFile" type="file" accept="image/png,image/gif,image/jpg,image/jpeg,image/bmp"/>
                </a>
            </form>
        </div>

        <form class="createForm fl" id="createForm" method="get" action="">
            <div class="left fl">
                <p>
                    <label for="nameCn" class="text-justify">中 文 名</label>
                    <input id="nameCn" name="nameCn" type="text">
                </p>
                <p>
                    <label for="role">主要身份</label>
                    <input id="role" name="role" type="text">
                </p>
                <p>
                    <label for="career">职&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;业</label>
                    <input id="career" name="career" type="text">
                </p>
                <p>
                    <label>人物标签</label>
                    <input name="labels" type="text">
                </p>
            </div>
            <div class="right fl">
                <p>
                    <label for="birthplace">出 生 地</label>
                    <input id="birthplace" name="birthplace" type="text">
                </p>
                <p>
                    <label for="birthday">出生日期</label>
                    <input id="birthday" name="birthday" type="text">
                </p>

                <p>
                    <label for="college">毕业学校</label>
                    <input id="college" name="college" type="text">
                </p>
                <p>
                    <label for="nationality">国&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;籍</label>
                    <input id="nationality" name="nationality" type="text">
                </p>
            </div>
        </form>
    </div>
    <div class="create-main">
        <div class="cont">
            <h4 class="c-title">人物介绍（选填）</h4>

            <textarea id="myEditor" name="peop-desc-ipt" class="peop-desc-ipt"></textarea>
            <div class="submitbox clearfix">
                <a class="prePage fl" href="#">返回上页</a>
                <div class="codebox fl">
                    <img class="imgcode" src="http://106.75.72.156/api/getcaptcha?type=celebrity" alt="">
                    <input class="codeipt" type="text" placeholder="验证码">
                    <a class="submitBtn js-submit" href="javascript:;">提交审核</a>
                </div>
            </div>
        </div>

    </div>
</div>
<div id="footer"></div>

<script type="text/javascript" src="../../js/lib/jquery.min.js"></script>
<script type="text/javascript" src="../../js/lib/jquery.validate.min.js"></script>
<script type="text/javascript" src="../../js/lib/jquery.form.min.js"></script>
<script type="text/javascript" src="../../js/lib/ueditor/umeditor.config.js"></script>
<script type="text/javascript" src="../../js/lib/ueditor/umeditor.min.js"></script>
<script type="text/javascript" src="../../js/lib/ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" src="../../js/base.js"></script>
<script type="text/javascript" src="../../js/page/pc/create.js"></script>
<script>
    $.validator.setDefaults({
        submitHandler: function () {
            alert("提交事件!");
        }
    });
    jQuery(function ($) {
        //实例化编辑器
        //var um = UM.getEditor('myEditor');
        //上传文件
        $('.a-upload input').change(function () {
            console.log(arguments)
            $("#uploadImg").ajaxSubmit({
                url: '/api/uploadimg',
                data: {
                    type: 'celebrity'
                },
                type: "POST",
                success: function (retData) {
                    if (retData.errno == 0) {
                        $('.a-upload img').attr('src', retData.data);
                        $('.a-upload span').html('');
                    } else {
                        alert('上传出错')
                    }
                },
                error: function (msg) {
                    alert("出错了");
                }
            });
        })
        $('.createForm').validate({
            submitHandler: function (form) {
                alert("submitted");
                console.log(arguments)
                $.post('api/submitcelebrity',{
                    avatar:$('.a-upload img').attr('src'),
                    
                })
            },
            errorElement: 'i',
            rules: {
                title: 'required',
                /*nameCn: 'required',
                 view: 'required',
                 summary1: 'required',
                 birthplace: 'required',
                 birthday: 'required',
                 college: 'required',
                 nationality: 'required'*/
            },
            messages: {
                nameCn: '*',
                view: '*',
                summary1: '*',
                birthplace: '*',
                birthday: '*',
                college: '*',
                nationality: '*'
            }
        });
        $('.js-submit').click(function () {
            $('.createForm').submit()
        })
    })
</script>
</body>
</html>