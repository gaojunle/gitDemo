<!Doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <title>米乐弗</title>
    <link rel="stylesheet" href="../../css/common/normalize.css?_v=<?=$ver?>">
    <link rel="stylesheet" href="../../css/common/common.css?_v=<?=$ver?>">
    <link rel="stylesheet" href="../../css/common/pagination.css?_v=<?=$ver?>">
    <link rel="stylesheet" href="../../css/page/pc/people-detail.css?_v=<?=$ver?>">
    <link rel="stylesheet" href="../../css/page/pc/searchresult.css?_v=<?=$ver?>">
</head>
<body>
<?php include TPLPATH . '/html/pc/_header.html';?>
<div class="contbox">
    <div class="title">
        <span class="triangle triangle-left"></span>搜索结果：<span class="s-key">马</span><span
            class="triangle triangle-right"></span>
    </div>
    <div class="rel-peoples">
        <p class="rel">与“<span class="s-key">马</span>”相关的人物：</p>
        <div class="js-people-list-box">
            <!--<div class="peo-info clearfix">
                <img class="head-icon fl" src="../../img/pc/people/mayun-1.png" alt="">

                <div class="zhejiao-box">
                    <img class="zhejiao" src="../../img/pc/people-zhejiao.png" alt="">
                </div>
                <div class="desc fl">
                    <p>
                        <span class="name">马云</span>
                        <span class="en-name">(Jack Ma)</span>
                        <span class="post">阿里巴巴集团创始人</span>
                        {{likeTpl isLike id}}
                    </p>

                    <div class="info">
                        <p><label>职业：<span class="job">企业家、慈善家</span></label><label>出 生 地：<span
                                class="job">浙江省杭州市</span></label></p>

                        <p><label>国籍：<span class="job">中国</span></label><label>出生日期：<span
                                class="job">1964年9月10日</span></label></p>

                        <p><label>民族：<span class="job">汉族</span></label><label>毕业院校：<span class="job">杭州师范大学（原杭州师范学院）</span></label>
                        </p>
                    </div>
                    <div class="line"></div>
                    <div class="about">
                        <span class="status">
                            <span><img src="../../img/pc/redu.png" alt="">热度2000</span>
                            <span><img src="../../img/pc/shoucang.png" alt="">收藏30篇</span>
                            <span><img src="../../img/pc/shoulv.png" alt="">收录30篇</span>
                        </span>
                        <span class="hot-view"><img src="../../img/pc/guandian.png"
                                                    alt="">最热观点：<span>创业</span><span>创业</span><span>创业</span></span>
                    </div>
                </div>
            </div>-->
        </div>

        <div id="pagination-people" class="pagination"><!-- 这里显示分页 --></div>
    </div>
    <div class="rel-speechs">
        <p class="rel">与“<span class="s-key">马</span>”相关的演讲：</p>
        <div class="slideBox contbox">
            <div class="bd">
                <ul class="lh hot-box js-speech-list-box">
                    <!--<li class="clearfix">
                        <div class="desc-pic fl"><img src="../../img/pc/people/jieshao.png" alt=""></div>
                        <div class="hot-info fl">
                            <div class="fl top-l">
                                <h3>2016阿里云栖大会演讲</h3>

                                <p>未来30年政府将为年轻人制定政策</p>
                            </div>
                            <div class="fl top-r">
                                <p>
                                    <span><img src="../../img/pc/redu.png" alt="">热度2000</span>
                                    <span><img src="../../img/pc/shoucang.png" alt="">收藏30篇</span>
                                    <span><img src="../../img/pc/clock.png" alt="">发布时间 2017-1-03</span>
                                </p>

                                <p class="hot-word">
                                    <span>创业</span><span>创业</span><span>创业</span>
                                </p>
                            </div>
                            <div style="clear: both"></div>
                            <div class="cont">
                                <p>
                                    各位世界各地来的创业者，大家好，欢迎来到杭州参加我们的云栖大会。二十年以前，1995年我刚开始互联网创业的时候，全世界互联网的用户可能不到五万人，全世界的互联网从业者不到五万人。</p>

                                <p>
                                    但是今天到云栖大会参加会议的人已经接近五万人，这21年来的变化，令全世界震撼，特别是今天全世界用互联网的人口已经超过了20亿。十几年以前，有一次我跟朋友在西湖边上聊天，我说将来会有一个新的世界诞生，这个世界会被人称之为虚拟的世界，这个世界会有一个新的大陆，这个世界所有的人都会在网络上发生关联。今天我们真正诞生了一个新的世界，一个新的经济体，一个超过了20亿人的强大的世界……</p>
                            </div>
                        </div>
                    </li>-->
                </ul>
            </div>
        </div>
        <div id="pagination-speech" class="pagination"><!-- 这里显示分页 --></div>
    </div>
    <div class="create-people-img hide">
        <a href="./createPeople.html"><img src="../../img/pc/create-people.png" alt=""></a>
    </div>
</div>
<?php include TPLPATH . '/html/pc/_footer.html';?>
<!--人物列表模板-->
<script type="text/html" id="people-list-tpl">
    {{#each list}}
    <div class="peo-info clearfix" data-id="{{myapplyId}}">
        <img class="head-icon fl" src="{{avatar}}" alt="">

        <div class="zhejiao-box">
            <img class="zhejiao" src="../../img/pc/people-zhejiao.png" alt="">
        </div>
        <div class="desc fl">
            <p>
                <span class="name"><a href="./peopleDetail.html?id={{id}}&_c=1">{{nameCn}}</a></span>
                <span class="en-name">{{nameEn}}</span>
                <span class="post">{{role}}</span>
                {{likeTpl isLike id}}
            </p>

            <div class="info">
                <p>
                    <label>职业：<span class="job">{{career}}</span></label>
                    <label>出 生 地：<span class="job">{{birthplace}}</span></label>
                </p>

                <p>
                    <label>国籍：<span class="job">{{nationality}}</span></label>
                    <label>出生日期：<span class="job">{{birthday}}</span></label>
                </p>

                <p>
                    <label>主要身份：<span class="job">{{role}}</span></label>
                    <label>毕业院校：<span class="job">{{college}}</span></label>
                </p>
            </div>
            <div class="line"></div>
            <div class="about">
                <span class="status">
                    <span><img src="../../img/pc/redu.png" alt="">热度{{hotNum}}</span>
                    <span><img src="../../img/pc/shoucang.png" alt="">收藏{{lecLikeNum}}篇</span>
                    <span><img src="../../img/pc/shoulv.png" alt="">收录{{lecNum}}篇</span>
                </span>
            </div>
        </div>
    </div>
    {{/each}}
</script>
<!--演讲列表模板-->
<script type="text/html" id="speech-list-tpl">
    {{#each list}}
    <li class="clearfix">
        <div class="desc-pic fl"><img src="{{image}}" alt=""></div>
        <div class="hot-info fl">
            <div class="fl top-l">
                <h3>{{title}}</h3>

                <p>{{subTitle}}</p>
            </div>
            <div class="fl top-r">
                <p>
                    <span><img src="../../img/pc/redu.png" alt="">热度{{hotNum}}</span>
                    <span><img src="../../img/pc/shoucang.png" alt="">收藏{{likeNum}}篇</span>
                    <span><img src="../../img/pc/clock.png" alt="">发布时间 {{publicDate speaktime}}</span>
                </p>
                <p class="hot-word">
                    {{#each labelDesc}}
                    <span data-id="{{id}}">{{value}}</span>
                    {{/each}}
                </p>
            </div>
            <div style="clear: both"></div>
            <div class="cont">
               {{content}}
            </div>
        </div>
    </li>
    {{/each}}
</script>
<script type="text/javascript" src="../../js/lib/jquery.min.js?_v=<?=$ver?>"></script>
<script type="text/javascript" src="../../js/lib/jquery.pagination.js?_v=<?=$ver?>"></script>
<script type="text/javascript" src="../../js/lib/template7.min.js?_v=<?=$ver?>"></script>
<script type="text/javascript" src="../../js/lib/util.js?_v=<?=$ver?>"></script>
<script type="text/javascript" src="../../js/base.js?_v=<?=$ver?>"></script>
<script>
    jQuery(function ($) {
        var Main = {
            init: function () {
                this.bindEvent();
                this.initPeopleList();
                this.initSpeechList();
            },

            bindEvent: function () {
                $('.s-key').html(Util.getQueryString('searchipt'));
            },

            //加载人物列表
            initPeopleList: function () {
                var pageCount = 5,
                    isInit = true;

                getData(1);

                function getData(pageNum) {
                    $.get('/api/search', {
                        type: 'celebrity',
                        keyword: Util.getQueryString('searchipt'),
                        pageNum: pageNum || 1,
                        count: pageCount
                    }, function (retData) {
                        renderData(retData);

                        if (isInit) {
                            initPagination(retData);
                            isInit = false;
                        }

                        return false;
                    });
                }

                function renderData(retData) {
                    Template7.registerHelper('likeTpl', function (isLike, id) {
                        var tpl = isLike ?
                        '<span class="focus js-like on" data-type="celebrity" data-id="' + id + '">已关注</span>' :
                        '<span class="focus js-like" data-type="celebrity" data-id="' + id + '">关注</span>'
                        return tpl;
                    });

                    var template = $('#people-list-tpl').html();
                    var compiledTemplate = Template7.compile(template);
                    var html = compiledTemplate(retData.data);

                    $('.js-people-list-box').html(html);
                }

                function initPagination(retData) {
                    $("#pagination-people").pagination(Math.ceil(retData.data.totalNum / pageCount), {
                        num_edge_entries: 4, //边缘页数
                        num_display_entries: 4, //主体页数
                        callback: function (page) {
                            if (!isInit) {
                                getData(page + 1);
                            }
                        },
                        prev_text: "< 上一页",
                        next_text: "下一页 >",
                        items_per_page: 1 //每页显示项
                    });
                }
            },

            //加载演讲列表
            initSpeechList: function () {
                var pageCount = 5,
                    isInit = true;

                getData(1);

                function getData(pageNum) {
                    $.get('/api/search', {
                        type: 'lecture',
                        keyword: Util.getQueryString('searchipt'),
                        pageNum: pageNum || 1,
                        count: pageCount
                    }, function (retData) {
                        renderData(retData);

                        if (isInit) {
                            initPagination(retData);
                            isInit = false;
                        }

                        return false;
                    });
                }

                function renderData(retData) {
                    Template7.registerHelper('publicDate',function (speaktime) {
                        return new Date(speaktime).Format('yyyy-MM-dd')
                    })
                    var template = $('#speech-list-tpl').html();
                    var compiledTemplate = Template7.compile(template);
                    var html = compiledTemplate(retData.data);

                    $('.js-speech-list-box').html(html);
                }

                function initPagination(retData) {
                    $("#pagination-speech").pagination(Math.ceil(retData.data.totalNum / pageCount), {
                        num_edge_entries: 4, //边缘页数
                        num_display_entries: 4, //主体页数
                        callback: function (page) {
                            if (!isInit) {
                                getData(page + 1);
                            }
                        },
                        prev_text: "< 上一页",
                        next_text: "下一页 >",
                        items_per_page: 1 //每页显示项
                    });
                }
            }
        };
        Main.init();
    })
</script>
</body>
</html>